name: Build and Push Docker Image

on:
  push:
    branches: [ main ]
    paths:
      - 'Dockerfile'

jobs:
  call-build-push:
    uses: Raulaxxo/DockerBuildPush/.github/workflows/build-and-push-docker.yml@master
    with:
      image_name: raulaxxo/KailleraServer
      image_tag: 2.2
      dockerfile_path: ./Dockerfile
      context: .
    secrets:
      REGISTRY_USERNAME: ${{ secrets.REGISTRY_USERNAME }}
      REGISTRY_PASSWORD: ${{ secrets.REGISTRY_PASSWORD }}
